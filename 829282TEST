local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/MlFrvWM/BBLT81/main/BL81827TC", true))()

local window = library:AddWindow("Sad TESTTTT", {
    main_color = Color3.fromRGB(10, 22, 74),
    min_size = Vector2.new(685, 550),
    can_resize = false,
})

local function setFontRecursive(guiObject, font)
    for _, obj in pairs(guiObject:GetDescendants()) do
        if obj:IsA("TextLabel") or obj:IsA("TextButton") or obj:IsA("TextBox") then
            obj.Font = font
        end
    end
end

spawn(function()
    repeat wait() until window.gui
    setFontRecursive(window.gui, Enum.Font.GothamSemibold)
end)

local tabCal = window:AddTab("Damage Calculator")

--------------------------------------------------
-- ðŸ”¹ ConfiguraÃ§Ã£o
--------------------------------------------------
local BASE_DAMAGE_FACTOR = 0.1       -- 10% da forÃ§a
local PACK_FACTOR_PER_PACK = 0.0335  -- +3.35% por pack
local PACKS_MAX = 8

--------------------------------------------------
-- ðŸ”¹ FunÃ§Ãµes auxiliares
--------------------------------------------------
local function parseValue(s)
    if not s then return 0 end
    s = s:upper():gsub("%s", ""):gsub(",", "")
    local suffixes = { B = 1e9, T = 1e12, QA = 1e15 }
    local numPart, suf = s:match("^([%-]?[%d%.]+)(%a*)$")
    if not numPart then return 0 end
    local n = tonumber(numPart) or 0
    if suf ~= "" and suffixes[suf] then
        return n * suffixes[suf]
    end
    return n
end

local function formatValue(n)
    local absn = math.abs(n)
    local sign = n < 0 and "-" or ""
    if absn >= 1e15 then
        return string.format("%s%.2fQa", sign, absn / 1e15)
    elseif absn >= 1e12 then
        return string.format("%s%.2fT", sign, absn / 1e12)
    elseif absn >= 1e9 then
        return string.format("%s%.2fB", sign, absn / 1e9)
    else
        return string.format("%s%.2f", sign, absn)
    end
end

--------------------------------------------------
-- ðŸ”¹ Pega forÃ§a atual do jogador
--------------------------------------------------
local function getCurrentStrength()
    local player = game.Players.LocalPlayer
    if player and player:FindFirstChild("leaderstats") and player.leaderstats:FindFirstChild("Strength") then
        return tonumber(player.leaderstats.Strength.Value) or 0
    end
    return 0
end

--------------------------------------------------
-- ðŸ”¹ Labels
--------------------------------------------------
local lblUsedStrength = tabCal:AddLabel("Used Strength: -")
local lblBaseDamage   = tabCal:AddLabel("Base Damage: -")
local lblFinalDamage  = tabCal:AddLabel("Damage with X Packs: -")
local lblIncrease     = tabCal:AddLabel("Damage Increase: -")

--------------------------------------------------
-- ðŸ”¹ VariÃ¡veis de controle
--------------------------------------------------
local strengthText = "7.08Qa"
local packsCount = 8
local useCurrentStrength = true
local useFullPacks = true

--------------------------------------------------
-- ðŸ”¹ Atualiza interface
--------------------------------------------------
local function updateDisplay()
    local strength = useCurrentStrength and getCurrentStrength() or parseValue(strengthText)
    local packs = useFullPacks and PACKS_MAX or packsCount

    local baseDamage = strength * BASE_DAMAGE_FACTOR
    local finalDamage = strength * (BASE_DAMAGE_FACTOR + PACK_FACTOR_PER_PACK * packs)
    local increaseValue = finalDamage - baseDamage
    local increasePercent = baseDamage > 0 and ((finalDamage / baseDamage) - 1) * 100 or 0

    lblUsedStrength.Text = "Used Strength: " .. formatValue(strength)
    lblBaseDamage.Text   = "Base Damage: " .. formatValue(baseDamage)

    lblFinalDamage.Text = string.format("Damage with %d Packs: %s", packs, formatValue(finalDamage))
    lblFinalDamage.TextColor3 = Color3.fromRGB(255, 0, 0)

    lblIncrease.Text = string.format("Damage Increase: %s (+%.0f%%)", formatValue(increaseValue), increasePercent)
end

--------------------------------------------------
-- ðŸ”¹ Inputs
--------------------------------------------------
local txtStrength = tabCal:AddTextBox("Strength Input", function(value)
    strengthText = value
    if not useCurrentStrength then
        updateDisplay()
    end
end, { clear = false, text = strengthText })

local txtPacks = tabCal:AddTextBox("Packs Count (0-8)", function(value)
    local num = tonumber(value) or 0
    if num < 0 then num = 0 elseif num > PACKS_MAX then num = PACKS_MAX end
    packsCount = num
    if not useFullPacks then
        updateDisplay()
    end
end, { clear = false, text = tostring(packsCount) })

--------------------------------------------------
-- ðŸ”¹ Switches
--------------------------------------------------
tabCal:AddSwitch("Use Current Strength", function(state)
    useCurrentStrength = state
    updateDisplay()
end):Set(useCurrentStrength)

tabCal:AddSwitch("Use Full Packs (8)", function(state)
    useFullPacks = state
    updateDisplay()
end):Set(useFullPacks)

--------------------------------------------------
-- ðŸ”¹ Listener para atualizar automaticamente
--------------------------------------------------
local player = game.Players.LocalPlayer
if player and player:FindFirstChild("leaderstats") and player.leaderstats:FindFirstChild("Strength") then
    player.leaderstats.Strength.Changed:Connect(function()
        if useCurrentStrength then
            updateDisplay()
        end
    end)
end

--------------------------------------------------
-- ðŸ”¹ InicializaÃ§Ã£o
--------------------------------------------------
updateDisplay()


--------------------------------------------------
-- ðŸ”¹ Tab 2: Calculator 2 (Durability / Hit Calculations)
--------------------------------------------------
local tabCal2 = window:AddTab("Calculator 2")

-- ConfiguraÃ§Ã£o
local PACKS_MAX = 8
local ULTIMATE_BOOST_PERCENT = 75     -- % de boost do Ultimate
local PETS_BOOST_PER_PACK = 33.125    -- % de boost total por pack (exemplo da imagem)
local ATTACK_SPEED = 1.3              -- velocidade de ataque (hits/segundo)

-- FunÃ§Ãµes auxiliares (reutilizadas)
local function parseValue(s)
    if not s then return 0 end
    s = s:upper():gsub("%s", ""):gsub(",", "")
    local suffixes = { B = 1e9, T = 1e12, QA = 1e15 }
    local numPart, suf = s:match("^([%-]?[%d%.]+)(%a*)$")
    if not numPart then return 0 end
    local n = tonumber(numPart) or 0
    if suf ~= "" and suffixes[suf] then
        return n * suffixes[suf]
    end
    return n
end

local function formatValue(n)
    local absn = math.abs(n)
    local sign = n < 0 and "-" or ""
    if absn >= 1e15 then
        return string.format("%s%.2fQa", sign, absn / 1e15)
    elseif absn >= 1e12 then
        return string.format("%s%.2fT", sign, absn / 1e12)
    elseif absn >= 1e9 then
        return string.format("%s%.2fB", sign, absn / 1e9)
    else
        return string.format("%s%.2f", sign, absn)
    end
end

local function getCurrentDurability()
    local player = game.Players.LocalPlayer
    if player and player:FindFirstChild("leaderstats") and player.leaderstats:FindFirstChild("Durability") then
        return tonumber(player.leaderstats.Durability.Value) or 0
    end
    return 0
end

-- Labels
local lblPlayerDur = tabCal2:AddLabel("Player Durability: -")
local lblUltimate  = tabCal2:AddLabel("Ultimate Boost: -")
local lblPets      = tabCal2:AddLabel("Pets Boost: -")
local lblTotalHP   = tabCal2:AddLabel("Total Health: -")
local lblHitsKill  = tabCal2:AddLabel("Hits to Kill: -")
local lblTimeKill  = tabCal2:AddLabel("Time to Kill: -")

-- VariÃ¡veis
local durabilityText = "3.13Qa"
local packsCountDur = 8
local useCurrentDurability = true
local useFullPacksDur = true
local incomingDamage = parseValue("2.6Qa") -- Exemplo de dano por hit

-- AtualizaÃ§Ã£o
local function updateDisplayDurability()
    local dur = useCurrentDurability and getCurrentDurability() or parseValue(durabilityText)
    local packs = useFullPacksDur and PACKS_MAX or packsCountDur

    -- Boosts
    local ultimateBoostValue = dur * (ULTIMATE_BOOST_PERCENT / 100)
    local petsBoostValue = dur * ((PETS_BOOST_PER_PACK * packs) / 100)

    -- Total HP
    local totalHealth = dur + ultimateBoostValue + petsBoostValue

    -- CÃ¡lculos de hits
    local hitsToKill = incomingDamage > 0 and (totalHealth / incomingDamage) or 0
    local timeToKill = hitsToKill / ATTACK_SPEED

    -- Labels
    lblPlayerDur.Text = string.format("Player Durability: %s", formatValue(dur))
    lblUltimate.Text  = string.format("Ultimate Boost: %s (+%d%%)", formatValue(ultimateBoostValue), ULTIMATE_BOOST_PERCENT)
    lblPets.Text      = string.format("Pets Boost (%d): %s (+%d%%)", packs, formatValue(petsBoostValue), PETS_BOOST_PER_PACK * packs)
    lblTotalHP.Text   = string.format("Total Health: %s", formatValue(totalHealth))
    lblTotalHP.TextColor3 = Color3.fromRGB(0, 255, 255)

    lblHitsKill.Text  = string.format("Hits to Kill: %.1f", hitsToKill)
    lblTimeKill.Text  = string.format("Time to Kill: %dm %.1fs", math.floor(timeToKill / 60), timeToKill % 60)
end

-- Inputs
tabCal2:AddTextBox("Durability Input", function(value)
    durabilityText = value
    if not useCurrentDurability then
        updateDisplayDurability()
    end
end, { clear = false, text = durabilityText })

tabCal2:AddTextBox("Target Packs Count (0-8)", function(value)
    local num = tonumber(value) or 0
    if num < 0 then num = 0 elseif num > PACKS_MAX then num = PACKS_MAX end
    packsCountDur = num
    if not useFullPacksDur then
        updateDisplayDurability()
    end
end, { clear = false, text = tostring(packsCountDur) })

-- Listener
local player = game.Players.LocalPlayer
if player and player:FindFirstChild("leaderstats") and player.leaderstats:FindFirstChild("Durability") then
    player.leaderstats.Durability.Changed:Connect(function()
        if useCurrentDurability then
            updateDisplayDurability()
        end
    end)
end

-- InicializaÃ§Ã£o
updateDisplayDurability()
